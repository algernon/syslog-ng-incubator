@version: 3.5

@define include-path "`include-path`:`scldir`"
@include "tests/incubator-scl.conf"

test/template-function(
  module("basicfuncs-plus")
  subject("or")
  description("$$(or) returns the first non-empty element")
  template("$(or ${empty} ${PROGRAM} ${MESSAGE}) $(or)")
);

test/template-function(
  module("basicfuncs-plus")
  subject("divx")
  description("$$(//) works, and returns a float")
  template("$(// 1 2) $(/ 1 2)")
);

test/template-function(
  module("basicfuncs-plus")
  subject("divx.not-enough-params")
  description("$$(//) fails with not enough parameters")
  template("$(//) $(// 1)")
);

test/template-function(
  module("basicfuncs-plus")
  subject("divx.NaN")
  description("$$(//) fails with NaN parameters")
  template("$(// foo bar) $(// 1 bar) $(// foo 1)")
);

test/template-function(
  module("basicfuncs-plus")
  subject("state")
  description("$$(state) works")
  template("$(state my-state) $(state my-state 1234) $(state my-state)")
);

test/template-function(
  module("basicfuncs-plus")
  subject("state.fail")
  description("$$(state) fails with not 1 or 2 arguments")
  template("$(state)$(state 1 2 3)")
);
